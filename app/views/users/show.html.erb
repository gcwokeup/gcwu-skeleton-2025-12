<div class="container py-4">
  <div class="row">
    <!-- Mobile: Full width, Desktop: Sidebar -->
    <div class="col-lg-4 mb-4">
      <div class="card shadow-sm border-0">
        <div class="card-body text-center p-4">
          <!-- Avatar -->
          <div class="mb-3">
            <% if @user.avatar.attached? %>
              <%= image_tag @user.avatar.variant(resize_to_limit: [200, 200]), 
                  class: "rounded-circle img-fluid shadow", 
                  style: "width: 150px; height: 150px; object-fit: cover;",
                  alt: @user.full_name %>
            <% elsif @user.avatar_url.present? %>
              <%= image_tag @user.avatar_url, 
                  class: "rounded-circle img-fluid shadow", 
                  style: "width: 150px; height: 150px; object-fit: cover;",
                  alt: @user.full_name %>
            <% else %>
              <div class="rounded-circle bg-primary text-white d-inline-flex align-items-center justify-content-center shadow" 
                   style="width: 150px; height: 150px; font-size: 3rem;">
                <%= @user.first_name[0].upcase %><%= @user.last_name[0].upcase %>
              </div>
            <% end %>
          </div>
          
          <!-- Name -->
          <h4 class="mb-1"><%= @user.full_name %></h4>
          <p class="text-muted mb-3">@<%= @user.username %></p>
          
          <!-- Stats -->
          <div class="row text-center mb-3">
            <div class="col-4">
              <div class="fw-bold">0</div>
              <small class="text-muted">Posts</small>
            </div>
            <div class="col-4">
              <div class="fw-bold">0</div>
              <small class="text-muted">Followers</small>
            </div>
            <div class="col-4">
              <div class="fw-bold">0</div>
              <small class="text-muted">Following</small>
            </div>
          </div>
          
          <!-- Edit Profile Button (only for current user) -->
          <% if current_user == @user %>
            <div class="d-grid gap-2">
              <%= link_to edit_user_path(@user), class: "btn btn-primary" do %>
                <i class="bi bi-pencil me-1"></i> Edit Profile
              <% end %>
              <%= link_to settings_path, class: "btn btn-outline-secondary" do %>
                <i class="bi bi-gear me-1"></i> Settings
              <% end %>
            </div>
          <% else %>
            <div class="d-grid gap-2">
              <button class="btn btn-primary">
                <i class="bi bi-person-plus me-1"></i> Follow
              </button>
              <button class="btn btn-outline-secondary">
                <i class="bi bi-envelope me-1"></i> Message
              </button>
            </div>
          <% end %>
        </div>
      </div>
      
      <!-- User Info Card -->
      <div class="card shadow-sm border-0 mt-3">
        <div class="card-body">
          <h6 class="text-muted text-uppercase small mb-3">About</h6>
          
          <div class="mb-3">
            <i class="bi bi-envelope text-primary me-2"></i>
            <span class="text-muted"><%= @user.email %></span>
          </div>
          
          <div class="mb-3">
            <i class="bi bi-calendar text-primary me-2"></i>
            <span class="text-muted">Joined <%= @user.created_at.strftime('%B %Y') %></span>
          </div>
          
          <% if @user.provider.present? %>
            <div class="mb-0">
              <i class="bi bi-shield-check text-primary me-2"></i>
              <span class="text-muted">Connected via Google</span>
            </div>
          <% end %>
        </div>
      </div>
    </div>
    
    <!-- Main Content Area -->
    <div class="col-lg-8">
      <!-- Activity/Posts Section -->
      <div class="card shadow-sm border-0">
        <div class="card-header bg-white border-0 pt-4 px-4">
          <ul class="nav nav-tabs card-header-tabs" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#posts" type="button" role="tab">
                <i class="bi bi-grid-3x3 me-1"></i> Posts
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" data-bs-toggle="tab" data-bs-target="#activity" type="button" role="tab">
                <i class="bi bi-clock-history me-1"></i> Activity
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" data-bs-toggle="tab" data-bs-target="#about" type="button" role="tab">
                <i class="bi bi-info-circle me-1"></i> About
              </button>
            </li>
          </ul>
        </div>
        
        <div class="card-body p-4">
          <div class="tab-content">
            <!-- Posts Tab -->
            <div class="tab-pane fade show active" id="posts" role="tabpanel">
              <div class="text-center py-5">
                <i class="bi bi-file-earmark-text text-muted" style="font-size: 4rem;"></i>
                <h5 class="mt-3 text-muted">No posts yet</h5>
                <p class="text-muted">
                  <% if current_user == @user %>
                    Start sharing your thoughts with the community.
                  <% else %>
                    <%= @user.first_name %> hasn't posted anything yet.
                  <% end %>
                </p>
              </div>
            </div>
            
            <!-- Activity Tab -->
            <div class="tab-pane fade" id="activity" role="tabpanel">
              <div class="text-center py-5">
                <i class="bi bi-clock-history text-muted" style="font-size: 4rem;"></i>
                <h5 class="mt-3 text-muted">No recent activity</h5>
                <p class="text-muted">Recent actions will appear here.</p>
              </div>
            </div>
            
            <!-- About Tab -->
            <div class="tab-pane fade" id="about" role="tabpanel">
              <h5 class="mb-3">About <%= @user.first_name %></h5>
              
              <div class="row g-3">
                <div class="col-12 col-md-6">
                  <div class="p-3 bg-light rounded">
                    <small class="text-muted d-block mb-1">Username</small>
                    <strong>@<%= @user.username %></strong>
                  </div>
                </div>
                
                <div class="col-12 col-md-6">
                  <div class="p-3 bg-light rounded">
                    <small class="text-muted d-block mb-1">Full Name</small>
                    <strong><%= @user.full_name %></strong>
                  </div>
                </div>
                
                <div class="col-12 col-md-6">
                  <div class="p-3 bg-light rounded">
                    <small class="text-muted d-block mb-1">Member Since</small>
                    <strong><%= @user.created_at.strftime('%B %d, %Y') %></strong>
                  </div>
                </div>
                
                <div class="col-12 col-md-6">
                  <div class="p-3 bg-light rounded">
                    <small class="text-muted d-block mb-1">Last Sign In</small>
                    <strong>
                      <% if @user.last_sign_in_at.present? %>
                        <%= time_ago_in_words(@user.last_sign_in_at) %> ago
                      <% else %>
                        Never
                      <% end %>
                    </strong>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

